<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Input Event</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />
    <!-- CSS -->
    <style>
      .contents {
        border: 2px solid black;
        padding: 8px;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .form-element {
        margin: 8px;
        text-align: left;
      }

      #notifikasiSisaKarakter {
        visibility: hidden;
      }
    </style>
  </head>
  <body>
    <!-- HTML -->
    <div class="contents">
      <h2 align="center"><strong>Input Event Form</strong></h2>
      <div class="formContent">
        <form id="formDataDiri" autocomplete="off">
          <!-- Element 1 -->
          <div class="form-element" id="fieldName">
            <label for="inputNama">Nama Panggilan : </label><br />
            <input
              type="text"
              id="inputNama"
              name="nama"
              placeholder="Nama panggilan anda"
              maxlength="15"
            />
            <br />
            <label id="notifikasiSisaKarakter"
              >Sisa Karakter : <span id="sisaKarakter">0</span>
            </label>
          </div>

          <!-- Element 2 -->
          <div class="form-element" id="fieldCopy">
            <label for="inputCopy"><em>Copy</em> Tulisan ini : </label><br />
            <input
              type="text"
              id="inputCopy"
              name="copy"
              value="Hello World"
              readonly
            />
          </div>

          <!-- Element 3 -->
          <div class="form-element" id="fieldPaste">
            <label for="inputPaste"><em>Paste</em> tulisan disini</label> <br />
            <input
              type="text"
              id="inputPaste"
              name="paste"
              placeholder="Paste Something in here!"
            />
          </div>

          <!-- Element 4 -->
          <div class="form-element" id="fieldCaptcha">
            <label for="inputCaptcha">Tulis <em>captcha</em> berikut : </label>
            <br />
            <img src="https://i.ibb.co/yy59QPB/Captcha.png" alt="captcha" />
            <br />
            <input
              type="text"
              id="inputCaptcha"
              name="captcha"
              placeholder="Tulis captcha disini"
            />
            <br />
            <p>Tekan enter jika sudah selesai menulis <em>Captcha</em></p>
          </div>

          <!-- Element 5 -->
          <div class="form-element" align="center">
            <input
              type="submit"
              id="submitButton"
              value="Submit Data"
              disabled
            />
          </div>
        </form>
      </div>
    </div>

    <!-- Javascript -->
    <script>
      // TODO: Meload content di document
      document.addEventListener("DOMContentLoaded", function () {
        const inputMaxLengthOnLoad =
          document.getElementById("inputNama").maxLength;
        document.getElementById("sisaKarakter").innerText =
          inputMaxLengthOnLoad;
      });

      // TODO : Event input => ketika kita menginput sesuatu
      document
        .getElementById("inputNama")
        .addEventListener("input", function () {
          const jumlahKarakterDiketik =
            document.getElementById("inputNama").value.length;
          const jumlahKarakterMaksimal =
            document.getElementById("inputNama").maxLength;

          console.log(`Jumlah karakter diketik ${jumlahKarakterDiketik}`);
          console.log(`Jumlah karakter maksimal ${jumlahKarakterMaksimal}`);

          const sisaKarakterUpdate =
            jumlahKarakterMaksimal - jumlahKarakterDiketik;
          document.getElementById("sisaKarakter").innerText =
            sisaKarakterUpdate.toString();

          if (sisaKarakterUpdate === 0) {
            document.getElementById("sisaKarakter").innerText =
              "Batas maksimal tercapai!";
          } else if (sisaKarakterUpdate <= 5) {
            document.getElementById("sisaKarakter").style.color = "red";
          } else {
            document.getElementById("sisaKarakter").style.color = "black";
          }
        });

      // TODO : Event focus => ketika kita mengeklik sesuatu element
      document
        .getElementById("inputNama")
        .addEventListener("focus", function () {
          console.log("Input nama : focus");
          document.getElementById("notifikasiSisaKarakter").style.visibility =
            "visible";
        });

      // TODO : Event blur => ketika kita meninggalkan fokus sesuatu element
      document
        .getElementById("inputNama")
        .addEventListener("blur", function () {
          console.log("input nama : blur");
          document.getElementById("notifikasiSisaKarakter").style.visibility =
            "hidden";
        });

      // TODO: Event change => akan terjadi jika terdeteksi adanya perubahan nilai yang dimasukkan
      document
        .getElementById("inputCaptcha")
        .addEventListener("change", function () {
          console.log("input captcha : change");
          const inputCaptcha = document.getElementById("inputCaptcha").value;
          const submitButtonStatus = document.getElementById("submitButton");

          if (inputCaptcha === "PRNU") {
            submitButtonStatus.removeAttribute("disabled");
          } else {
            submitButtonStatus.setAttribute("disabled", "");
          }
        });

      document
        .getElementById("formDataDiri")
        .addEventListener("submit", function (event) {
          const inputCaptcha = document.getElementById("inputCaptcha").value;

          if (inputCaptcha === "PRNU") {
            alert("Selamat! captcha anda lolos :)");
          } else {
            alert("captcha anda belum tepat :(");
          }

          event.preventDefault;
        });

      // TODO: event onCopy
      document
        .getElementById("inputCopy")
        .addEventListener("copy", function () {
          alert("Berhasil mengcopy sesuatu...");
        });

      document
        .getElementById("inputPaste")
        .addEventListener("paste", function () {
          alert("Berhasil mempaste teks..");
        });
    </script>
  </body>
</html>
